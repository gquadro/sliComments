(function(t){var e={},n=function(i){var o=e[i];if(!o){o=e[i]={};var a=o.exports={};t[i].call(a,n,o,a,window)}return o.exports};n("0")})({0:function(t){(function(e){var n=t("1"),i=t("2");window.addEvent("domready",function(){var t=e("comments").removeClass("no-js"),o=e("comments_counter"),a=function(t){return function(e){e.stop(),new Request({url:this.get("href"),format:"raw",method:"get",onSuccess:t.bind(this),onFailure:function(t){alert(t.responseText)}}).send()}},s=a(function(t){var e=this.getParent(".content-container").getElement(".metadata"),n=e.getElement(".rating")||new Element("span.rating").inject(e),i=(n.get("text").toInt()||0)+t.toInt();n.set("text",i>0?"+"+i:i).removeClass("(?:positive|negative)").addClass(i>0?"positive":"negative")});t.addEvents({"click:relay(.comment-delete)":a(function(){this.getParent("li.comment").nix(!0),o.set("text",o.get("text").toInt()-1)}),"click:relay(.comment-like)":s,"click:relay(.comment-dislike)":s,"click:relay(.comment-flag)":a(function(t){alert(t)}),"click:relay(.slicomments-spoiler button)":function(){var t=this.getParent();t.hasClass("spoiler-hide")?(t.removeClass("spoiler-hide"),this.set("text",this.get("data-hide"))):(t.addClass("spoiler-hide"),this.set("text",this.get("data-show")))},"click:relay(.cancel-reply)":function(t){t.stop(),this.getParent(".comment").set("class","comment").getElement(".comments-actions").getChildren().setStyle("display",null),this.getParent("form").destroy()}});var r=new Request({method:"get",url:"index.php?option=com_slicomments&task=comments.display",format:"raw",headers:{Accept:"text/html, */*"},link:"cancel",onRequest:function(){console.log("loading")},onSuccess:function(n){console.log("loaded"),e("comments_list").destroy(),e("comments_pagination").destroy(),t.adopt(new Element("div").set("html",n).getChildren()),window.scrollTo(0,t.getPosition().y)},onFailure:function(t){alert("error"),console.log(t)}});t.addEvent("click:relay(#comments_pagination a)",function(t){try{var n=e("comments_pagination");n.slicommentslimitstart.set("value",this.search.match(/[?&]slicommentslimitstart=([0-9]+)/)[1]),r.send({data:n.toQueryString()}),t.stop()}catch(t){}});var l=t.getElement(".comments_form");if(l){var c=l.getElement("textarea"),m=l.getElement(".chars-count");m&&new n(c,m);var d=1==l.get("data-logged")?!0:!1,u=document.getElement("html").get("lang");try{u=u.split("-"),u[1]=u[1].toUpperCase(),u=u.join("-")}catch(h){}Locale.list().contains(u)&&Locale.use(u);var f=function(t){var e=t.retrieve("validator");return e||(e=new Form.Validator.Inline(t,{scrollToErrorsOnSubmit:!1,evaluateFieldsOnChange:!1,evaluateFieldsOnBlur:!1}),t.store("validator",e)),e.validate()},g=c.getDimensions().y;c.addEvents({focus:function(){0==this.value.length&&this.tween("height",g,100)},blur:function(){0==this.value.length&&this.tween("height",g)}});var v=function(){var t=document.createElement("input");return"placeholder"in t}();if(c.get("disabled")&&v||l.getElements(".comments_form_inputs li label").setStyle("display","none"),!v){var p={offset:{x:7,y:4}};new OverText(c,{positionOptions:p,textOverride:c.get("placeholder")}),d||(new OverText(l.name,{positionOptions:p,textOverride:l.name.get("placeholder")}),new OverText(l.email,{positionOptions:p,textOverride:l.email.get("placeholder")}))}t.addEvent("click:relay(.comment-submit)",function(t){if(t.stop(),f(this.form)){new Request.HTML({url:this.form.get("action"),format:"raw",method:"post",data:this.form,onSuccess:function(t,n,i){if(this.form.hasClass("edit-form"))return this.form.getParent("li.comment").removeClass("editing").getElement(".content").set("html",i),this.form.destroy(),void 0;if(t[0].inject(e("comments_list"),"top"),o.set("text",o.get("text").toInt()+1),this.form.hasClass("reply-form"))this.form.destroy();else{this.form.reset();var a=this.form.text.retrieve("charCount");a&&a.update_counter(),this.form.text.fireEvent("blur")}OverText.update()}.bind(this),onFailure:function(t){alert(t.responseText)},onComplete:function(){r&&(clearInterval(r),n.set("disabled",null),this.set("html",a))}.bind(this)}).send();var n=this,i=1,a=n.get("html"),s=n.get("data-sending")||"Sending";this.set("disabled","disabled"),this.set("html",s);var r=function(){var t=Array(i++%4+1).join(".");n.set("html",s+t)}.periodical(1e3/3)}}),t.addEvent("click:relay(.comment-reply)",function(t){t.stop();var e=l.clone();e.addClass("reply-form"),e.getElements(".validation-advice").destroy();var i=this.getParent(".comment"),o=i.getElement(".metadata .author").get("text").trim();e.inject(i.getElement(".clr"),"before");var a=e.getElement("textarea").addClass("init");a.set("value","@"+o+" ").setCaretPosition("end");var s=e.getElement(".chars-count");s&&new n(a,s),this.getParent().setStyle("display","none")}),t.addEvent("click:relay(.comment-edit)",a(function(t){var e=this.getParent("li.comment"),i=e.addClass("editing").getElement(".content-container"),o=l.clone().addClass("edit-form"),a=o.getElement(".profile-image-container");a&&a.destroy(),o.task.set("value","comments.save"),o.item_id.set("name","id").set("value",e.get("data-id")),o.text.set("text",t).addClass("init"),new n(o.text,o.getElement(".chars-count")),o.inject(i)}));var x;if(!d&&(x=l.getElement(".profile-image"))){var y=x.get("src");~y.indexOf("gravatar.com")&&(y=y.toURI(),e("comments_form_email").addEvent("change",function(){x.set("src",y.set("file",i.digest_s(this.get("value")))+"")}))}}})})(document.id)},1:function(t,e){e.exports=new Class({options:{maxLength:500},textarea:null,counter:null,initialize:function(t,e){this.textarea=$(t),this.counter=$(e),this.textarea.store("charCount",this),this.options.maxLength=t.get("data-maxlength")||500;var n=this.update_counter.bind(this);Browser.chrome||Browser.safari||this.textarea.addEvents({blur:n,change:n,focus:n,keydown:n,keypress:n,keyup:n,paste:n}),this.textarea.addListener("input",n),n()},update_counter:function(){var t=this.options.maxLength-this.textarea.value.length;this.counter.set("text",t),5>=t?this.counter.setStyle("color","#900"):this.counter.setStyle("color",null),0>t?this.textarea.form.getElement("button").set("disabled",!0):this.textarea.form.getElement("button").set("disabled",!1)}})},2:function(t,e,n){n.digest=function(t){function e(t,e,n){return t&e|~t&n}function n(t,e,n){return t&n|e&~n}function i(t,e,n){return t^e^n}function o(t,e,n){return e^(t|~n)}function a(t){return[255&t,255&t>>>8,255&t>>>16,255&t>>>24]}function s(t,e,n,i,o,a,s,r){t[0]+=r(e[0],n[0],i[0])+f[o]+s,t[0]=t[0]<<a|t[0]>>>32-a,t[0]+=e[0]}var r=t.length;t.push(128);for(var l=63&56-t.length,c=0;l>c;c++)t.push(0);a(8*r).forEach(function(e){t.push(e)}),[0,0,0,0].forEach(function(e){t.push(e)});for(var m,d,u,h,f,g=[1732584193],v=[4023233417],p=[2562383102],x=[271733878],c=0;t.length>c;c+=64){f=[];for(var y=0;64>y;y+=4)k=c+y,f.push(t[k]|t[k+1]<<8|t[k+2]<<16|t[k+3]<<24);m=g[0],d=v[0],u=p[0],h=x[0],s(g,v,p,x,0,7,3614090360,e),s(x,g,v,p,1,12,3905402710,e),s(p,x,g,v,2,17,606105819,e),s(v,p,x,g,3,22,3250441966,e),s(g,v,p,x,4,7,4118548399,e),s(x,g,v,p,5,12,1200080426,e),s(p,x,g,v,6,17,2821735955,e),s(v,p,x,g,7,22,4249261313,e),s(g,v,p,x,8,7,1770035416,e),s(x,g,v,p,9,12,2336552879,e),s(p,x,g,v,10,17,4294925233,e),s(v,p,x,g,11,22,2304563134,e),s(g,v,p,x,12,7,1804603682,e),s(x,g,v,p,13,12,4254626195,e),s(p,x,g,v,14,17,2792965006,e),s(v,p,x,g,15,22,1236535329,e),s(g,v,p,x,1,5,4129170786,n),s(x,g,v,p,6,9,3225465664,n),s(p,x,g,v,11,14,643717713,n),s(v,p,x,g,0,20,3921069994,n),s(g,v,p,x,5,5,3593408605,n),s(x,g,v,p,10,9,38016083,n),s(p,x,g,v,15,14,3634488961,n),s(v,p,x,g,4,20,3889429448,n),s(g,v,p,x,9,5,568446438,n),s(x,g,v,p,14,9,3275163606,n),s(p,x,g,v,3,14,4107603335,n),s(v,p,x,g,8,20,1163531501,n),s(g,v,p,x,13,5,2850285829,n),s(x,g,v,p,2,9,4243563512,n),s(p,x,g,v,7,14,1735328473,n),s(v,p,x,g,12,20,2368359562,n),s(g,v,p,x,5,4,4294588738,i),s(x,g,v,p,8,11,2272392833,i),s(p,x,g,v,11,16,1839030562,i),s(v,p,x,g,14,23,4259657740,i),s(g,v,p,x,1,4,2763975236,i),s(x,g,v,p,4,11,1272893353,i),s(p,x,g,v,7,16,4139469664,i),s(v,p,x,g,10,23,3200236656,i),s(g,v,p,x,13,4,681279174,i),s(x,g,v,p,0,11,3936430074,i),s(p,x,g,v,3,16,3572445317,i),s(v,p,x,g,6,23,76029189,i),s(g,v,p,x,9,4,3654602809,i),s(x,g,v,p,12,11,3873151461,i),s(p,x,g,v,15,16,530742520,i),s(v,p,x,g,2,23,3299628645,i),s(g,v,p,x,0,6,4096336452,o),s(x,g,v,p,7,10,1126891415,o),s(p,x,g,v,14,15,2878612391,o),s(v,p,x,g,5,21,4237533241,o),s(g,v,p,x,12,6,1700485571,o),s(x,g,v,p,3,10,2399980690,o),s(p,x,g,v,10,15,4293915773,o),s(v,p,x,g,1,21,2240044497,o),s(g,v,p,x,8,6,1873313359,o),s(x,g,v,p,15,10,4264355552,o),s(p,x,g,v,6,15,2734768916,o),s(v,p,x,g,13,21,1309151649,o),s(g,v,p,x,4,6,4149444226,o),s(x,g,v,p,11,10,3174756917,o),s(p,x,g,v,2,15,718787259,o),s(v,p,x,g,9,21,3951481745,o),g[0]+=m,v[0]+=d,p[0]+=u,x[0]+=h}var E=[];return a(g[0]).forEach(function(t){E.push(t)}),a(v[0]).forEach(function(t){E.push(t)}),a(p[0]).forEach(function(t){E.push(t)}),a(x[0]).forEach(function(t){E.push(t)}),E},n.digest_s=function(t){for(var e=[],i=0;t.length>i;i++)e.push(t.charCodeAt(i));var o=n.digest(e),a="";return o.forEach(function(t){for(var e=t.toString(16);2>e.length;)e="0"+e;a+=e}),a}}});
