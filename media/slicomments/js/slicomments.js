(function(o){var m={},j=function(l){var f=m[l];if(!f){var f=m[l]={},h=f.exports={};o[l].call(h,j,f,h,window)}return f.exports};j("0")})({"0":function(o){var m=document.id,j=o("1"),l=o("2");window.addEvent("domready",function(){var f=m("comments").removeClass("no-js"),h=m("comments_counter"),i=function(a){return function(b){b.stop();(new Request({url:this.get("href"),format:"raw",method:"get",onSuccess:a.bind(this),onFailure:function(a){alert(a.responseText)}})).send()}},g=i(function(a){var b=this.getParent(".content-container").getElement(".metadata"),
b=b.getElement(".rating")||(new Element("span.rating")).inject(b),a=(b.get("text").toInt()||0)+a.toInt();b.set("text",0<a?"+"+a:a).removeClass("(?:positive|negative)").addClass(0<a?"positive":"negative")});f.addEvents({"click:relay(.comment-delete)":i(function(){this.getParent("li.comment").nix(!0);h.set("text",h.get("text").toInt()-1)}),"click:relay(.comment-like)":g,"click:relay(.comment-dislike)":g,"click:relay(.comment-flag)":i(function(a){alert(a)}),"click:relay(.slicomments-spoiler button)":function(){var a=
this.getParent();a.hasClass("spoiler-hide")?(a.removeClass("spoiler-hide"),this.set("text",this.get("data-hide"))):(a.addClass("spoiler-hide"),this.set("text",this.get("data-show")))},"click:relay(.cancel-reply)":function(a){a.stop();this.getParent(".comment").set("class","comment").getElement(".comments-actions").getChildren().setStyle("display",null);this.getParent("form").destroy()}});var t=new Request({method:"get",url:"index.php?option=com_slicomments&task=comments.display",format:"raw",headers:{Accept:"text/html, */*"},
link:"cancel",onRequest:function(){console.log("loading")},onSuccess:function(a){console.log("loaded");m("comments_list").destroy();m("comments_pagination").destroy();f.adopt((new Element("div")).set("html",a).getChildren());window.scrollTo(0,f.getPosition().y)},onFailure:function(a){alert("error");console.log(a)}});f.addEvent("click:relay(#comments_pagination a)",function(a){try{var b=m("comments_pagination");b.slicommentslimitstart.set("value",this.search.match(/[?&]slicommentslimitstart=([0-9]+)/)[1]);
t.send({data:b.toQueryString()});a.stop()}catch(c){}});var b=f.getElement(".comments_form");if(b){var g=b.getElement("textarea"),c=b.getElement(".chars-count");c&&new j(g,c);var c=1==b.get("data-logged")?!0:!1,a=document.getElement("html").get("lang");try{a=a.split("-"),a[1]=a[1].toUpperCase(),a=a.join("-")}catch(u){}Locale.list().contains(a)&&Locale.use(a);var e=g.getDimensions().y;g.addEvents({focus:function(){0==this.value.length&&this.tween("height",e,100)},blur:function(){0==this.value.length&&
this.tween("height",e)}});a="placeholder"in document.createElement("input");(!g.get("disabled")||!a)&&b.getElements(".comments_form_inputs li label").setStyle("display","none");a||(a={offset:{x:7,y:4}},new OverText(g,{positionOptions:a,textOverride:g.get("placeholder")}),c||(new OverText(b.name,{positionOptions:a,textOverride:b.name.get("placeholder")}),new OverText(b.email,{positionOptions:a,textOverride:b.email.get("placeholder")})));f.addEvent("click:relay(.comment-submit)",function(a){a.stop();
var a=this.form,b=a.retrieve("validator");if(!b){b=new Form.Validator.Inline(a,{scrollToErrorsOnSubmit:false,evaluateFieldsOnChange:false,evaluateFieldsOnBlur:false});a.store("validator",b)}if(b.validate()){(new Request.HTML({url:this.form.get("action"),format:"raw",method:"post",data:this.form,onSuccess:function(a,b,c){if(this.form.hasClass("edit-form")){this.form.getParent("li.comment").removeClass("editing").getElement(".content").set("html",c);this.form.destroy()}else{a[0].inject(m("comments_list"),
"top");h.set("text",h.get("text").toInt()+1);if(this.form.hasClass("reply-form"))this.form.destroy();else{this.form.reset();(a=this.form.text.retrieve("charCount"))&&a.update_counter();this.form.text.fireEvent("blur")}OverText.update()}}.bind(this),onFailure:function(a){alert(a.responseText)},onComplete:function(){if(g){clearInterval(g);c.set("disabled",null);this.set("html",e)}}.bind(this)})).send();var c=this,d=1,e=c.get("html"),f=c.get("data-sending")||"Sending";this.set("disabled","disabled");
this.set("html",f);var g=function(){var a=Array(d++%4+1).join(".");c.set("html",f+a)}.periodical(1E3/3)}});f.addEvent("click:relay(.comment-reply)",function(a){a.stop();a=b.clone();a.addClass("reply-form");a.getElements(".validation-advice").destroy();var c=this.getParent(".comment"),d=c.getElement(".metadata .author").get("text").trim();a.inject(c.getElement(".clr"),"before");c=a.getElement("textarea").addClass("init");c.set("value","@"+d+" ").setCaretPosition("end");(a=a.getElement(".chars-count"))&&
new j(c,a);this.getParent().setStyle("display","none")});f.addEvent("click:relay(.comment-edit)",i(function(a){var c=this.getParent("li.comment").addClass("editing").getElement(".content-container"),d=b.clone().addClass("edit-form");d.getElement(".profile-image-container").destroy();d.task.set("value","comments.save");d.article_id.set("name","id").set("value",this.get("data-id"));d.text.set("text",a).addClass("init");new j(d.text,d.getElement(".chars-count"));d.inject(c)}));var d;if(!c&&(d=b.getElement(".profile-image"))){var n=
d.get("src");~n.indexOf("gravatar.com")&&(n=n.toURI(),m("comments_form_email").addEvent("change",function(){d.set("src",n.set("file",l.digest_s(this.get("value")))+"")}))}}})},1:function(o,m){m.exports=new Class({options:{maxLength:500},textarea:null,counter:null,initialize:function(j,l){this.textarea=$(j);this.counter=$(l);this.textarea.store("charCount",this);this.options.maxLength=j.get("data-maxlength")||500;var f=this.update_counter.bind(this);!Browser.chrome&&!Browser.safari&&this.textarea.addEvents({blur:f,
change:f,focus:f,keydown:f,keypress:f,keyup:f,paste:f});this.textarea.addListener("input",f);f()},update_counter:function(){var j=this.options.maxLength-this.textarea.value.length;this.counter.set("text",j);5>=j?this.counter.setStyle("color","#900"):this.counter.setStyle("color",null);0>j?this.textarea.form.getElement("button").set("disabled",!0):this.textarea.form.getElement("button").set("disabled",!1)}})},2:function(o,m,j){j.digest=function(l){function f(a,b,c){return a&b|~a&c}function h(a,b,c){return a&
c|b&~c}function i(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function j(a){return[a&255,a>>>8&255,a>>>16&255,a>>>24&255]}function b(a,b,c,d,e,f,g,h){a[0]+=h(b[0],c[0],d[0])+q[e]+g;a[0]=a[0]<<f|a[0]>>>32-f;a[0]+=b[0]}var c=l.length;l.push(128);for(var a=56-l.length&63,m=0;m<a;m++)l.push(0);j(8*c).forEach(function(a){l.push(a)});[0,0,0,0].forEach(function(a){l.push(a)});for(var c=[1732584193],a=[4023233417],e=[2562383102],d=[271733878],n,o,r,s,q,m=0;m<l.length;m+=64){q=[];for(n=0;64>n;n+=
4)k=m+n,q.push(l[k]|l[k+1]<<8|l[k+2]<<16|l[k+3]<<24);n=c[0];o=a[0];r=e[0];s=d[0];b(c,a,e,d,0,7,3614090360,f);b(d,c,a,e,1,12,3905402710,f);b(e,d,c,a,2,17,606105819,f);b(a,e,d,c,3,22,3250441966,f);b(c,a,e,d,4,7,4118548399,f);b(d,c,a,e,5,12,1200080426,f);b(e,d,c,a,6,17,2821735955,f);b(a,e,d,c,7,22,4249261313,f);b(c,a,e,d,8,7,1770035416,f);b(d,c,a,e,9,12,2336552879,f);b(e,d,c,a,10,17,4294925233,f);b(a,e,d,c,11,22,2304563134,f);b(c,a,e,d,12,7,1804603682,f);b(d,c,a,e,13,12,4254626195,f);b(e,d,c,a,14,17,
2792965006,f);b(a,e,d,c,15,22,1236535329,f);b(c,a,e,d,1,5,4129170786,h);b(d,c,a,e,6,9,3225465664,h);b(e,d,c,a,11,14,643717713,h);b(a,e,d,c,0,20,3921069994,h);b(c,a,e,d,5,5,3593408605,h);b(d,c,a,e,10,9,38016083,h);b(e,d,c,a,15,14,3634488961,h);b(a,e,d,c,4,20,3889429448,h);b(c,a,e,d,9,5,568446438,h);b(d,c,a,e,14,9,3275163606,h);b(e,d,c,a,3,14,4107603335,h);b(a,e,d,c,8,20,1163531501,h);b(c,a,e,d,13,5,2850285829,h);b(d,c,a,e,2,9,4243563512,h);b(e,d,c,a,7,14,1735328473,h);b(a,e,d,c,12,20,2368359562,h);
b(c,a,e,d,5,4,4294588738,i);b(d,c,a,e,8,11,2272392833,i);b(e,d,c,a,11,16,1839030562,i);b(a,e,d,c,14,23,4259657740,i);b(c,a,e,d,1,4,2763975236,i);b(d,c,a,e,4,11,1272893353,i);b(e,d,c,a,7,16,4139469664,i);b(a,e,d,c,10,23,3200236656,i);b(c,a,e,d,13,4,681279174,i);b(d,c,a,e,0,11,3936430074,i);b(e,d,c,a,3,16,3572445317,i);b(a,e,d,c,6,23,76029189,i);b(c,a,e,d,9,4,3654602809,i);b(d,c,a,e,12,11,3873151461,i);b(e,d,c,a,15,16,530742520,i);b(a,e,d,c,2,23,3299628645,i);b(c,a,e,d,0,6,4096336452,g);b(d,c,a,e,7,
10,1126891415,g);b(e,d,c,a,14,15,2878612391,g);b(a,e,d,c,5,21,4237533241,g);b(c,a,e,d,12,6,1700485571,g);b(d,c,a,e,3,10,2399980690,g);b(e,d,c,a,10,15,4293915773,g);b(a,e,d,c,1,21,2240044497,g);b(c,a,e,d,8,6,1873313359,g);b(d,c,a,e,15,10,4264355552,g);b(e,d,c,a,6,15,2734768916,g);b(a,e,d,c,13,21,1309151649,g);b(c,a,e,d,4,6,4149444226,g);b(d,c,a,e,11,10,3174756917,g);b(e,d,c,a,2,15,718787259,g);b(a,e,d,c,9,21,3951481745,g);c[0]+=n;a[0]+=o;e[0]+=r;d[0]+=s}var p=[];j(c[0]).forEach(function(a){p.push(a)});
j(a[0]).forEach(function(a){p.push(a)});j(e[0]).forEach(function(a){p.push(a)});j(d[0]).forEach(function(a){p.push(a)});return p};j.digest_s=function(l){for(var f=[],h=0;h<l.length;h++)f.push(l.charCodeAt(h));var i="";j.digest(f).forEach(function(f){for(f=f.toString(16);2>f.length;)f="0"+f;i+=f});return i}}});
