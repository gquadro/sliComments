(function(e){var t={},n=function(s){var i=t[s];if(!i){i=t[s]={};var a=i.exports={};e[s].call(a,n,i,a,window)}return i.exports};n("0")})({0:function(e){(function(t){window.addEvent("domready",function(){function n(e){if(e&&(e.stop(),C.dissolve()),!s()){b=!0,T||(T=f.length);var t=function(){return 0==T?(b=!1,clearInterval(t),void 0):(T--,i(f.shift()),void 0)}.periodical(500)}}function s(){return b?(T=f.length,!0):!1}function i(e){r.set("text",++g),e.setStyle("opacity",0).inject(p,"top").fade(),p.getLast().nix(!0)}function a(e){O=!0,n(e),E.show()}function o(e){e.stop(),E.hide(),O=!1}var c=t("comments"),m=c.getElement("form");if(m){var l=e("1"),p=t("comments_list"),r=t("comments_counter"),u=p.getFirst(),d=u?u.getElement(".metadata .created").get("data-created"):0,f=[],h=[].slice,_=[].push,v=new Request({url:"index.php?option=com_slicomments&task=comments.live&item_id="+m.item_id.get("value")+"&extension="+m.extension.get("value"),format:"raw",method:"get",noCache:!0,onSuccess:function(e){if(200==v.status){var t=JSON.decode(e),s=new Element("ul",{html:t.map(function(e){return l.call(sliComments,e)}).join("")});_.apply(f,h.call(s.getChildren("li.comment"))),d=t[t.length-1].created,O?n():(C.show(),M.set("html",""+(b?t:f).length))}},onFailure:function(e){400==e.status&&console.log(e.responseText),clearInterval(k)}}),g=r.get("html"),E=t("live-comments-disable"),C=t("live-comments-info"),M=C.getElement("strong"),O=!1,b=!1,T=0,k=function(){v.send({data:{lt:d}})}.periodical(3e3);E.getElement("a").addEvent("click",o),C.getElement("a.update_comments").addEvent("click",a),C.getElement("a.show_comments").addEvent("click",n)}})})(document.id)},1:function(require,module,exports,global){module.exports=function tmpl_comment(locals,filters,escape){escape=escape||require("2").escape,filters=filters||require("3");var buf=[];with(locals||{})buf.push('<li id="comment-',escape(id),'" class="comment" data-id="',escape(id),'">\n<div class="comment-body">\n	'),"undefined"!=typeof avatar&&buf.push('\n	<div class="profile-image-container">\n		<img class="profile-image" src="',escape(avatar),'" alt="',escape(name),'">\n	</div>\n	'),buf.push('\n	<div class="content-container">\n		<ul class="comments-actions">\n			'),this.user.permissions.vote&&buf.push('\n				<li><a class="comment-like" href="index.php?option=com_slicomments&amp;task=comments.vote&amp;v=1&amp;id=',escape(id),"&amp;",escape(this.token),'=1">',escape(filters._("COM_COMMENTS_ACTION_LIKE")),'</a></li>\n				<li><a class="comment-dislike" href="index.php?option=com_slicomments&amp;task=comments.vote&amp;v=0&amp;id=',escape(id),"&amp;",escape(this.token),'=1">',escape(filters._("COM_COMMENTS_ACTION_DISLIKE")),"</a></li>\n			"),buf.push("\n			"),this.user.permissions.edit&&buf.push('\n			<li><a class="comment-edit" href="index.php?option=com_slicomments&amp;task=comments.edit&amp;id=',escape(id),"&amp;",escape(this.token),'=1">\n				',escape(filters._("COM_COMMENTS_ACTION_EDIT")),"</a></li>\n			"),buf.push("\n			"),this.user.permissions.delete&&buf.push('\n			<li><a class="comment-delete" href="index.php?option=com_slicomments&amp;task=comments.delete&amp;id=',escape(id),"&amp;",escape(this.token),'=1">\n				',escape(filters._("COM_COMMENTS_ACTION_DELETE")),"</a></li>\n			"),buf.push("\n			"),this.user.permissions.flag&&buf.push('\n			<li><a class="comment-flag" href="index.php?option=com_slicomments&amp;task=comments.flag&amp;id=',escape(id),"&amp;",escape(this.token),'=1" title="',escape(filters._("COM_COMMENTS_ACTION_FLAG_TITLE")),'">\n				',escape(filters._("COM_COMMENTS_ACTION_FLAG")),"</a></li>\n			"),buf.push("\n			"),this.user.permissions.post&&buf.push('\n			<li><a class="comment-reply" href="#">\n				',escape(filters._("COM_COMMENTS_ACTION_REPLY")),"</a></li>\n			"),buf.push('\n		</ul>\n		<div class="metadata">\n			<span class="author">\n				'),"undefined"!=typeof link?buf.push('\n				<a href="',escape(link),'">',escape(name),"</a>\n				"):buf.push("\n					",escape(name),"\n				"),buf.push('\n			</span>\n			<span class="created">\n				',escape(filters.format(created,"%A, %d %B %Y %H:%M")),'\n			</span>\n		</div>\n		<div class="content">',text,'</div>\n	</div>\n</div>\n<div class="clr"></div>\n</li>\n');return buf.join("")}},2:function(e,t,n){n.escape=function(e){return new Element("p").set("text",e).get("html")}},3:function(e,t,n){n.human_time_diff=function(e){return new Date(1e3*parseInt(e,10)).timeDiffInWords()},n.format=function(e,t){return new Date(1e3*parseInt(e,10)).format(t)},n._=function(e){return Joomla.JText._(e)}}});
