(function(e){var t={},s=function(i){var n=t[i];if(!n){n=t[i]={};var a=n.exports={};e[i].call(a,s,n,a,window)}return n.exports};s("0")})({0:function(e){(function(t){window.addEvent("domready",function(){function s(e){if(e&&(e.stop(),d.dissolve()),!i()){T=!0,x||(x=g.length);var t=function(){0==x?(T=!1,clearInterval(t)):(x--,n(g.shift()))}.periodical(500)}}function i(){return T&&(x=g.length),T}function n(e){if(r.set("text",++M),e.setStyle("opacity",0).inject(p,"top").fade(),_>=v){var t=p.getChildren()[v];t&&t.nix(!0)}else _++}function a(e){b=!0,s(e),u.show()}function o(e){e.stop(),u.hide(),b=!1}var c=t("comments"),l=c.getElement("form");if(l){var m=e("1"),p=t("comments_list"),r=t("comments_counter"),u=t("live-comments-disable"),d=t("live-comments-info"),f=p.getFirst(),h=f?f.getElement(".metadata .created").get("data-created"):0,_=p.getChildren().length,v=Math.floor(1.5*p.get("data-limit"))||30,g=[],E=[].slice,C=[].push,M=r.get("html"),O=d.getElement("strong"),b=!1,T=!1,k=new Request({url:"index.php?option=com_slicomments&task=comments.live&item_id="+l.item_id.get("value")+"&extension="+l.extension.get("value"),format:"raw",method:"get",noCache:!0,onSuccess:function(e){if(200==k.status){var t=JSON.decode(e),i=new Element("ul",{html:t.map(function(e){return m.call(sliComments,e)}).join("")});C.apply(g,E.call(i.getChildren("li.comment"))),h=t[t.length-1].created,b?s():(d.show(),O.set("html",""+(T?t:g).length))}},onFailure:function(e){400==e.status&&console.log(e.responseText),clearInterval(I)}}),x=0,I=function(){k.send({data:{lt:h}})}.periodical(3e3);u.getElement("a").addEvent("click",o),d.getElement("a.update_comments").addEvent("click",a),d.getElement("a.show_comments").addEvent("click",s)}})})(document.id)},1:function(require,module,exports,global){module.exports=function tmpl_comment(locals,filters,escape){escape=escape||require("2").escape,filters=filters||require("3");var buf=[];with(locals||{})buf.push('<li id="comment-',escape(id),'" class="comment" data-id="',escape(id),'"><div class="comment-body">'),"undefined"!=typeof avatar&&buf.push('<div class="profile-image-container"><img class="profile-image" src="',escape(avatar),'" alt="',escape(name),'"></div>'),buf.push('<div class="content-container"><ul class="comments-actions">'),this.user.permissions.vote&&buf.push('<li><a class="comment-like" href="index.php?option=com_slicomments&amp;task=comments.vote&amp;v=1&amp;id=',escape(id),"&amp;",escape(this.token),'=1">',escape(filters._("COM_COMMENTS_ACTION_LIKE")),'</a></li><li><a class="comment-dislike" href="index.php?option=com_slicomments&amp;task=comments.vote&amp;v=0&amp;id=',escape(id),"&amp;",escape(this.token),'=1">',escape(filters._("COM_COMMENTS_ACTION_DISLIKE")),"</a></li>"),buf.push(""),this.user.permissions.edit&&buf.push('<li><a class="comment-edit" href="index.php?option=com_slicomments&amp;task=comments.edit&amp;id=',escape(id),"&amp;",escape(this.token),'=1">',escape(filters._("COM_COMMENTS_ACTION_EDIT")),"</a></li>"),buf.push(""),this.user.permissions.delete&&buf.push('<li><a class="comment-delete" href="index.php?option=com_slicomments&amp;task=comments.delete&amp;id=',escape(id),"&amp;",escape(this.token),'=1">',escape(filters._("COM_COMMENTS_ACTION_DELETE")),"</a></li>"),buf.push(""),this.user.permissions.flag&&buf.push('<li><a class="comment-flag" href="index.php?option=com_slicomments&amp;task=comments.flag&amp;id=',escape(id),"&amp;",escape(this.token),'=1" title="',escape(filters._("COM_COMMENTS_ACTION_FLAG_TITLE")),'">',escape(filters._("COM_COMMENTS_ACTION_FLAG")),"</a></li>"),buf.push(""),this.user.permissions.post&&buf.push('<li><a class="comment-reply" href="#">',escape(filters._("COM_COMMENTS_ACTION_REPLY")),"</a></li>"),buf.push('</ul><div class="metadata"><span class="author">'),"undefined"!=typeof link?buf.push('<a href="',escape(link),'">',escape(name),"</a>"):buf.push("",escape(name),""),buf.push('</span><span class="created">',escape(filters.format(created,"%A, %d %B %Y %H:%M")),'</span></div><div class="content">',text,'</div></div></div><div class="clr"></div></li>');return buf.join("")}},2:function(e,t,s){s.escape=function(e){return new Element("p").set("text",e).get("html")}},3:function(e,t,s){s.human_time_diff=function(e){return new Date(1e3*parseInt(e,10)).timeDiffInWords()},s.format=function(e,t){return new Date(1e3*parseInt(e,10)).format(t)},s._=function(e){return Joomla.JText._(e)}}});
